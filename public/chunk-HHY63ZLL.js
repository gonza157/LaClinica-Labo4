import{a as tt,b as it}from"./chunk-Q4YU3M55.js";import{h as X,k as Z,l as $}from"./chunk-FXXNP7EN.js";import{e as et,f as nt}from"./chunk-UQXX2G4H.js";import{a as ot,b as at,e as rt,f as lt,g as mt,h as ct}from"./chunk-KYJNGL4I.js";import{B as L,D as A,E as R}from"./chunk-X7NSQYYE.js";import{$b as w,$c as W,Ab as b,Eb as x,Gb as g,Hb as d,Jc as V,Kc as T,Pc as B,Qa as l,Va as f,Vb as c,Xb as D,Yb as N,Yc as G,Zc as v,_b as y,ab as H,ac as E,ad as j,cb as F,cd as q,dc as k,dd as K,ea as p,fa as u,fd as Y,gb as _,gd as z,hd as J,id as Q,jd as U,va as O,xb as s,yb as a,zb as n}from"./chunk-7XCQR3O2.js";import{a as I,b as P}from"./chunk-FJYW2LMB.js";var C=class r{constructor(e){this.el=e}permitirDecimales=!1;longitudMaxima=0;onKeyDown(e){if(!["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"].includes(e.key)&&!(e.ctrlKey&&["a","c","v","x"].includes(e.key))){if(!/[0-9]/.test(e.key))if(this.permitirDecimales&&[".",","].includes(e.key)){let t=this.el.nativeElement.value;if(t.includes(".")||t.includes(",")){e.preventDefault();return}}else{e.preventDefault();return}if(this.longitudMaxima>0){let t=this.el.nativeElement.value,o=t.length+1;if(t.replace(/[.,]/g,"").length+1>this.longitudMaxima){e.preventDefault();return}}}}onPaste(e){e.preventDefault();let i=e.clipboardData?.getData("text");if(i){let t=i.replace(/[^0-9.,]/g,"");if(!this.permitirDecimales)t=t.replace(/[.,]/g,"");else{let m=t.match(/[.,]/g);if(m&&m.length>1){let h=t.indexOf("."),M=t.indexOf(","),S=h!==-1&&M!==-1?Math.min(h,M):Math.max(h,M);t=t.substring(0,S+1)+t.substring(S+1).replace(/[.,]/g,"")}}this.longitudMaxima>0&&t.replace(/[.,]/g,"").length>this.longitudMaxima&&(t=t.substring(0,this.longitudMaxima+(this.permitirDecimales?1:0))),this.el.nativeElement.value=t;let o=new Event("input",{bubbles:!0});this.el.nativeElement.dispatchEvent(o)}}static \u0275fac=function(i){return new(i||r)(f(O))};static \u0275dir=F({type:r,selectors:[["","appSoloNumeros",""]],hostBindings:function(i,t){i&1&&g("keydown",function(m){return t.onKeyDown(m)})("paste",function(m){return t.onPaste(m)})},inputs:{permitirDecimales:"permitirDecimales",longitudMaxima:"longitudMaxima"}})};var st=()=>({standalone:!0});function ut(r,e){if(r&1){let i=x();a(0,"div",11)(1,"mat-form-field",12)(2,"mat-label"),c(3,"Clave"),n(),a(4,"input",13),E("ngModelChange",function(o){p(i);let m=d();return w(m.clave,o)||(m.clave=o),u(o)}),n()(),a(5,"mat-form-field",12)(6,"mat-label"),c(7,"Valor"),n(),a(8,"input",14),E("ngModelChange",function(o){p(i);let m=d();return w(m.valor,o)||(m.valor=o),u(o)}),n()(),a(9,"button",15),g("click",function(){p(i);let o=d();return u(o.agregarDinamico())}),c(10,"Agregar"),n()()}if(r&2){let i=d();l(4),y("ngModel",i.clave),s("ngModelOptions",k(5,st)),l(4),y("ngModel",i.valor),s("ngModelOptions",k(6,st)),l(),s("disabled",i.dinamicos.length>=3)}}function gt(r,e){if(r&1){let i=x();a(0,"button",17),g("click",function(){p(i);let o=d().index,m=d();return u(m.eliminarDinamico(o))}),a(1,"mat-icon"),c(2,"delete"),n()()}}function ft(r,e){if(r&1&&(a(0,"li")(1,"strong"),c(2),n(),c(3),_(4,gt,3,0,"button",16),n()),r&2){let i=e.$implicit,t=d();l(2),D("",i.clave,":"),l(),D(" ",i.valor," "),l(),s("ngIf",!t.data.soloLectura)}}function _t(r,e){if(r&1){let i=x();a(0,"mat-dialog-actions",18)(1,"button",19),g("click",function(){p(i);let o=d();return u(o.cancelar())}),c(2,"Cancelar"),n(),a(3,"button",20),g("click",function(){p(i);let o=d();return u(o.guardar())}),c(4,"Guardar"),n()()}if(r&2){let i=d();l(3),s("disabled",!i.form.valid)}}function bt(r,e){if(r&1){let i=x();a(0,"mat-dialog-actions",18)(1,"button",19),g("click",function(){p(i);let o=d();return u(o.cancelar())}),c(2,"Cerrar"),n()()}}var dt=class r{constructor(e,i,t){this.fb=e;this.dialogRef=i;this.data=t;t.historia?(this.form=this.fb.group({altura:[{value:t.historia.altura,disabled:!0}],peso:[{value:t.historia.peso,disabled:!0}],temperatura:[{value:t.historia.temperatura,disabled:!0}],presion:[{value:t.historia.presion,disabled:!0}]}),this.dinamicos=t.historia.dinamicos||[]):this.form=this.fb.group({altura:["",v.required],peso:["",v.required],temperatura:["",v.required],presion:["",v.required]})}form;dinamicos=[];clave="";valor="";agregarDinamico(){this.clave&&this.valor&&this.dinamicos.length<3&&(this.dinamicos.push({clave:this.clave,valor:this.valor}),this.clave="",this.valor="")}eliminarDinamico(e){this.dinamicos.splice(e,1)}guardar(){this.form.valid&&this.dialogRef.close(P(I({},this.form.value),{dinamicos:this.dinamicos}))}cancelar(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||r)(f(J),f(ot),f(at))};static \u0275cmp=H({type:r,selectors:[["app-dialogo-historia-clinica"]],decls:28,vars:12,consts:[["mat-dialog-title",""],[3,"formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","altura","appSoloNumeros","",3,"longitudMaxima"],["matInput","","formControlName","peso","appSoloNumeros","",3,"permitirDecimales","longitudMaxima"],["matInput","","formControlName","temperatura","appSoloNumeros","",3,"permitirDecimales","longitudMaxima"],["matInput","","formControlName","presion"],[1,"dinamicos-section"],["class","dinamicos-inputs",4,"ngIf"],[4,"ngFor","ngForOf"],["align","end",4,"ngIf"],[1,"dinamicos-inputs"],["appearance","fill"],["matInput","","name","clave",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","name","valor",3,"ngModelChange","ngModel","ngModelOptions"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(i,t){i&1&&(a(0,"h2",0),c(1),n(),a(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),c(6,"Altura (cm)"),n(),b(7,"input",3),n(),a(8,"mat-form-field",2)(9,"mat-label"),c(10,"Peso (kg)"),n(),b(11,"input",4),n(),a(12,"mat-form-field",2)(13,"mat-label"),c(14,"Temperatura (\xB0C)"),n(),b(15,"input",5),n(),a(16,"mat-form-field",2)(17,"mat-label"),c(18,"Presi\xF3n"),n(),b(19,"input",6),n(),a(20,"div",7)(21,"label"),c(22,"Datos adicionales (m\xE1x. 3)"),n(),_(23,ut,11,7,"div",8),a(24,"ul"),_(25,ft,5,3,"li",9),n()()()(),_(26,_t,5,1,"mat-dialog-actions",10)(27,bt,3,0,"mat-dialog-actions",10)),i&2&&(l(),N("Historia Cl\xEDnica de ",t.data.paciente.nombre," ",t.data.paciente.apellido),l(2),s("formGroup",t.form),l(4),s("longitudMaxima",3),l(4),s("permitirDecimales",!0)("longitudMaxima",5),l(4),s("permitirDecimales",!0)("longitudMaxima",4),l(8),s("ngIf",!t.data.soloLectura),l(2),s("ngForOf",t.dinamicos),l(),s("ngIf",!t.data.soloLectura),l(),s("ngIf",t.data.soloLectura))},dependencies:[B,V,T,Q,K,G,W,j,q,U,Y,z,ct,rt,mt,lt,$,Z,X,it,tt,R,A,L,nt,et,C],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.dinamicos-section[_ngcontent-%COMP%]{margin-top:1rem}.dinamicos-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#1976d2;font-weight:600;margin-bottom:.5rem;display:block}.dinamicos-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end}.dinamicos-inputs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#42a5f5)!important;color:#fff!important;border:none!important;border-radius:8px!important;padding:8px 16px!important;font-weight:600!important;transition:all .3s ease!important}.dinamicos-inputs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0d47a1,#1976d2)!important;transform:translateY(-1px)!important;box-shadow:0 4px 12px #42a5f54d!important}.dinamicos-inputs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#e0e0e0!important;color:#9e9e9e!important;cursor:not-allowed!important}ul[_ngcontent-%COMP%]{margin:.5rem 0 0;padding:0;list-style:none}li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.3rem 0}  .mat-mdc-form-field .mdc-text-field--filled .mdc-line-ripple:before{border-bottom-color:#42a5f5!important}  .mat-mdc-form-field .mdc-text-field--filled .mdc-line-ripple:after{border-bottom-color:#1976d2!important}  .mat-mdc-form-field .mdc-text-field--filled .mdc-floating-label{color:#1976d2!important}  .mat-mdc-form-field .mdc-text-field--filled .mdc-text-field__input{border-bottom:1px solid #42a5f5!important}  .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:focus~.mdc-floating-label{color:#1976d2!important}  .mat-mdc-dialog-actions button[mat-button]{background:linear-gradient(135deg,#64b5f6,#90caf9)!important;color:#fff!important;border:1px solid #64b5f6!important;border-radius:8px!important;padding:8px 16px!important;font-weight:600!important;transition:all .3s ease!important;margin:0 4px!important}  .mat-mdc-dialog-actions button[mat-button]:hover:not(:disabled){background:linear-gradient(135deg,#42a5f5,#64b5f6)!important;transform:translateY(-1px)!important;box-shadow:0 4px 12px #42a5f54d!important}  .mat-mdc-dialog-actions button[mat-button][color=primary]{background:linear-gradient(135deg,#1976d2,#42a5f5)!important;border-color:#1976d2!important}  .mat-mdc-dialog-actions button[mat-button][color=primary]:hover:not(:disabled){background:linear-gradient(135deg,#0d47a1,#1976d2)!important;box-shadow:0 4px 12px #42a5f566!important}  .mat-mdc-dialog-actions button[mat-icon-button]{color:#f44336!important;border-radius:50%!important;transition:all .3s ease!important}  .mat-mdc-dialog-actions button[mat-icon-button]:hover{background:#f443361a!important;transform:scale(1.1)!important}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}"]})};export{dt as a};
